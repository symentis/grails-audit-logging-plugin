<!--

     Licensed to the Apache Software Foundation (ASF) under one
     or more contributor license agreements.  See the NOTICE file
     distributed with this work for additional information
     regarding copyright ownership.  The ASF licenses this file
     to you under the Apache License, Version 2.0 (the
     "License"); you may not use this file except in compliance
     with the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing,
     software distributed under the License is distributed on an
     "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
     specific language governing permissions and limitations
     under the License.

-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- **************************************************************** -->
<!-- *  PLEASE KEEP COMPLICATED EXPRESSIONS OUT OF THESE TEMPLATES, * -->
<!-- *  i.e. only iterate & print data where possible. Thanks, Jez. * -->
<!-- **************************************************************** -->

<html>
<head>
    <!-- Generated by groovydoc (2.4.5) on Tue Jan 05 15:54:15 UTC 2016 -->
    <title>AuditLogListener (audit-logging 2.0.1-SNAPSHOT API)</title>
    <meta name="date" content="2016-01-05">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="../../../../groovy.ico" type="image/x-icon" rel="shortcut icon">
    <link href="../../../../groovy.ico" type="image/x-icon" rel="icon">
    <link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">

<body class="center">
<script type="text/javascript"><!--
if (location.href.indexOf('is-external=true') == -1) {
    parent.document.title="AuditLogListener (audit-logging 2.0.1-SNAPSHOT API)";
}
//-->
</script>
<noscript>
    <div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
    <!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
    <!--   -->
</a>
    <ul class="navList" title="Navigation">
        <li><a href="../../../../overview-summary.html">Overview</a></li>
        <li><a href="package-summary.html">Package</a></li>
        <li class="navBarCell1Rev">Class</li>
        <li><a href="../../../../deprecated-list.html">Deprecated</a></li>
        <li><a href="../../../../index-all.html">Index</a></li>
        <li><a href="../../../../help-doc.html">Help</a></li>
    </ul>
</div>

<div class="subNav">
    <div>
        <ul class="navList">
            <li><a href="../../../../index.html?grails/plugins/orm/auditable/AuditLogListener" target="_top">Frames</a></li>
            <li><a href="AuditLogListener.html" target="_top">No Frames</a></li>
        </ul>
    </div>
    <div>
        <ul class="subNavList">
            <li>Summary:&nbsp;</li>
            Nested&nbsp;&nbsp;&nbsp;Field&nbsp;&nbsp;&nbsp;<li><a href="#property_summary">Property</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#constructor_summary">Constructor</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#method_summary">Method</a></li>&nbsp;&nbsp;&nbsp;
        </ul>
        <ul class="subNavList">
            <li>&nbsp;|&nbsp;Detail:&nbsp;</li>
            Field&nbsp;&nbsp;&nbsp;<li><a href="#prop_detail">Property</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#constructor_detail">Constructor</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#method_detail">Method</a></li>&nbsp;&nbsp;&nbsp;
        </ul>
    </div>
    <a name="skip-navbar_top">
        <!--   -->
    </a></div>
<!-- ========= END OF TOP NAVBAR ========= -->

<!-- ======== START OF CLASS DATA ======== -->
<div class="header">

    <div class="subTitle">Package: <strong>grails.plugins.orm.auditable</strong></div>

    <h2 title="[Groovy] Class AuditLogListener" class="title">[Groovy] Class AuditLogListener</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><ul class="inheritance"></ul></li><li><ul class="inheritance"></ul></li><li>grails.plugins.orm.auditable.AuditLogListener
</ul>
<div class="description">
    <ul class="blockList">
        <li class="blockList">



    <p> Grails interceptor for logging saves, updates, deletes and acting on
 individual properties changes and delegating calls back to the Domain Class
 </p>

          </li>
    </ul>
</div>

<div class="summary">
    <ul class="blockList">
        <li class="blockList">
        <!-- =========== NESTED CLASS SUMMARY =========== -->
        

        <!-- =========== ENUM CONSTANT SUMMARY =========== -->
        
        <!-- =========== FIELD SUMMARY =========== -->
        
            <ul class="blockList">
                <li class="blockList"><a name="field_summary"><!--   --></a>
                    <ul class="blockList">
                    <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Inherited fields summary table">
                        <caption><span>Inherited fields</span><span class="tabEnd">&nbsp;</span></caption>
                        <tr>
                            <th class="colFirst" scope="col">Fields inherited from class</th>
                            <th class="colLast" scope="col">Fields</th>
                        </tr>
                                                <tr class="altColor">
                            <td class="colFirst"><strong><code>class org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener</code></strong></td>
                            <td class="colLast"><code>DEFAULT_ORDER, HIGHEST_PRECEDENCE, LOWEST_PRECEDENCE</code></td>
                        </tr>

                    </table>
                    </ul>
                </li>
                
            </ul>
        

        <!-- =========== PROPERTY SUMMARY =========== -->
        
         <ul class="blockList">
                <li class="blockList"><a name="property_summary"><!--   --></a>
                    <h3>Properties Summary</h3>
                    <ul class="blockList">
                    <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Properties Summary table, listing nested classes, and an explanation">
                        <caption><span>Properties</span><span class="tabEnd">&nbsp;</span></caption>
                        <tr>
                            <th class="colFirst" scope="col">Type</th>
                            <th class="colLast" scope="col">Name and description</th>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong>groovy.lang.Closure</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#actorClosure">actorClosure</a></code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code><strong>java.lang.String</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#actorKey">actorKey</a></code><br></td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong>java.util.List&lt;java.lang.String&gt;</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#defaultIgnoreList">defaultIgnoreList</a></code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code><strong>java.util.List&lt;java.lang.String&gt;</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#defaultMaskList">defaultMaskList</a></code><br></td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong>java.lang.Object</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#grailsApplication">grailsApplication</a></code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code><strong>java.lang.Boolean</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#logFullClassName">logFullClassName</a></code><br></td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong>java.lang.Boolean</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#logIds">logIds</a></code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code><strong>java.lang.Boolean</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#nonVerboseDelete">nonVerboseDelete</a></code><br></td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong>java.lang.String</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#propertyMask">propertyMask</a></code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code><strong>java.util.Map&lt;java.lang.String, java.lang.String&gt;</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#replacementPatterns">replacementPatterns</a></code><br></td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong>java.lang.Object</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#saveAuditLog">saveAuditLog</a></code><br>Save the audit log in a new session and optionally, in a transaction</td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code><strong>java.lang.String</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#sessionAttribute">sessionAttribute</a></code><br></td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong>java.lang.Boolean</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#stampAlways">stampAlways</a></code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code><strong>java.lang.String</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#stampCreatedBy">stampCreatedBy</a></code><br></td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong>java.lang.Boolean</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#stampEnabled">stampEnabled</a></code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code><strong>java.lang.String</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#stampLastUpdatedBy">stampLastUpdatedBy</a></code><br></td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong>java.lang.Boolean</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#transactional">transactional</a></code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code><strong>java.lang.Boolean</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#verbose">verbose</a></code><br>The verbose flag flips on and off column by column change logging in
 insert and delete events. </td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong>static&nbsp;java.lang.Object</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#withoutAuditLog">withoutAuditLog</a></code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code><strong>static&nbsp;java.lang.Object</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#withoutVerboseAuditLog">withoutVerboseAuditLog</a></code><br></td>
                        </tr>
                        
                    </table>
                   </ul>
                </li>
            </ul>
        

        <!-- =========== ELEMENT SUMMARY =========== -->
        

        
        <!-- ======== CONSTRUCTOR SUMMARY ======== -->
        <ul class="blockList">
                <li class="blockList"><a name="constructor_summary"><!--   --></a>
                    <h3>Constructor Summary</h3>
                    <ul class="blockList">
                    <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructors Summary table">
                        <caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
                        <tr>
                            <th class="colFirst" scope="col">Constructor and description</th>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst">
                                <code><a href="#AuditLogListener(org.grails.datastore.mapping.core.Datastore)">AuditLogListener</a></strong>
                                (org.grails.datastore.mapping.core.Datastore datastore)</code><br></td>
                        </tr>
                        
                    </table>
                   </ul>
              </li>
        </ul>
        

        
        <!-- ========== METHOD SUMMARY =========== -->
        <ul class="blockList">
            
            <li class="blockList"><a name="method_summary"><!--   --></a>
                    <h3>Methods Summary</h3>
                    <ul class="blockList">
                    <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Methods Summary table">
                        <caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
                        <tr>
                            <th class="colFirst" scope="col">Type</th>
                            <th class="colLast" scope="col">Name and description</th>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>boolean</strong></code></td>
                            <td class="colLast"><code><strong><a href="#callHandlersOnly(def)">callHandlersOnly</a></strong>(java.lang.Object domain)</code><br>We allow users to specify static auditable = [handlersOnly: true]
 if they don't want us to log events for them and instead have their own plan.</td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code>java.lang.String</strong></code></td>
                            <td class="colLast"><code><strong><a href="#conditionallyMask(def, java.lang.String, def)">conditionallyMask</a></strong>(java.lang.Object domain, java.lang.String key, java.lang.Object value)</code><br>@param domain the auditable domain object</td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>java.lang.Object</strong></code></td>
                            <td class="colLast"><code><strong><a href="#executeHandler(def, def, def, def)">executeHandler</a></strong>(java.lang.Object domain, java.lang.Object handler, java.lang.Object oldState, java.lang.Object newState)</code><br>This calls the handlers based on what was passed in to it.</td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code>java.lang.String</strong></code></td>
                            <td class="colLast"><code><strong><a href="#getActor()">getActor</a></strong>()</code><br></td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>protected&nbsp;java.lang.String</strong></code></td>
                            <td class="colLast"><code><strong><a href="#getClassName(grails.core.GrailsDomainClass)">getClassName</a></strong>(grails.core.GrailsDomainClass entity)</code><br>Get the class name to log.</td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code>protected&nbsp;java.util.Set&lt;java.lang.String&gt;</strong></code></td>
                            <td class="colLast"><code><strong><a href="#getDirtyPropertyNames(def, grails.core.GrailsDomainClass)">getDirtyPropertyNames</a></strong>(java.lang.Object domain, grails.core.GrailsDomainClass entity)</code><br>Return dirty property names for the given domain class. </td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>java.lang.Long</strong></code></td>
                            <td class="colLast"><code><strong><a href="#getPersistedObjectVersion(def, java.util.Map, java.util.Map)">getPersistedObjectVersion</a></strong>(java.lang.Object domain, java.util.Map newMap, java.util.Map oldMap)</code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code>protected&nbsp;java.lang.Object</strong></code></td>
                            <td class="colLast"><code><strong><a href="#getPersistentValue(def, java.lang.String, grails.core.GrailsDomainClass)">getPersistentValue</a></strong>(java.lang.Object domain, java.lang.String property, grails.core.GrailsDomainClass entity)</code><br>Get the persistent value for the given domain.property. </td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>java.lang.String</strong></code></td>
                            <td class="colLast"><code><strong><a href="#getUri(def)">getUri</a></strong>(java.lang.Object domain = null)</code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code>boolean</strong></code></td>
                            <td class="colLast"><code><strong><a href="#ignoreEvent(def, def)">ignoreEvent</a></strong>(java.lang.Object domain, java.lang.Object event)</code><br>We allow users to specify static auditable = [ignoreEvents: ["onSave","onDelete","onChange"]]
 First check global variable auditLog.events</td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>java.util.List&lt;java.lang.String&gt;</strong></code></td>
                            <td class="colLast"><code><strong><a href="#ignoreList(def)">ignoreList</a></strong>(java.lang.Object domain)</code><br>The default ignore field list is: ['version','lastUpdated'] if you want
 to provide your own ignore list do so by specifying the ignore list like so:</td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code>java.lang.Object</strong></code></td>
                            <td class="colLast"><code><strong><a href="#logChanges(def, java.util.Map, java.util.Map, def, def, def)">logChanges</a></strong>(java.lang.Object domain, java.util.Map newMap, java.util.Map oldMap, java.lang.Object persistedObjectId, java.lang.Object eventName, java.lang.Object className)</code><br>Leans heavily on the "toString()" of a property
 ... this feels crufty... should be tighter...</td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>java.lang.String</strong></code></td>
                            <td class="colLast"><code><strong><a href="#logIds(def)">logIds</a></strong>(java.lang.Object value)</code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code>java.util.List</strong></code></td>
                            <td class="colLast"><code><strong><a href="#maskList(def)">maskList</a></strong>(java.lang.Object domain)</code><br>The default properties to mask list is:  ['password']
 if you want to provide your own mask list, specify in the DomainClass:</td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>protected&nbsp;void</strong></code></td>
                            <td class="colLast"><code><strong><a href="#onPersistenceEvent(org.grails.datastore.mapping.engine.event.AbstractPersistenceEvent)">onPersistenceEvent</a></strong>(org.grails.datastore.mapping.engine.event.AbstractPersistenceEvent event)</code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code>protected&nbsp;void</strong></code></td>
                            <td class="colLast"><code><strong><a href="#onPostInsert(org.grails.datastore.mapping.engine.event.PostInsertEvent)">onPostInsert</a></strong>(org.grails.datastore.mapping.engine.event.PostInsertEvent event)</code><br>I'm using the post insert event here instead of the pre-insert
 event so that I can log the id of the new entity after it
 is saved. </td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>protected&nbsp;void</strong></code></td>
                            <td class="colLast"><code><strong><a href="#onPreDelete(org.grails.datastore.mapping.engine.event.PreDeleteEvent)">onPreDelete</a></strong>(org.grails.datastore.mapping.engine.event.PreDeleteEvent event)</code><br>We must use the preDelete event if we want to capture
 what the old object was like.</td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code>protected&nbsp;void</strong></code></td>
                            <td class="colLast"><code><strong><a href="#onPreUpdate(org.grails.datastore.mapping.engine.event.PreUpdateEvent)">onPreUpdate</a></strong>(org.grails.datastore.mapping.engine.event.PreUpdateEvent event)</code><br>Now we get fancy. </td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>void</strong></code></td>
                            <td class="colLast"><code><strong><a href="#setActorClosure(groovy.lang.Closure)">setActorClosure</a></strong>(groovy.lang.Closure closure)</code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code>protected&nbsp;boolean</strong></code></td>
                            <td class="colLast"><code><strong><a href="#significantChange(def, java.util.Map, java.util.Map)">significantChange</a></strong>(java.lang.Object domain, java.util.Map oldMap, java.util.Map newMap)</code><br>Prevent infinate loops of change logging by trapping
 non-significant changes. </td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>void</strong></code></td>
                            <td class="colLast"><code><strong><a href="#stamp(def, org.grails.datastore.mapping.engine.event.EventType)">stamp</a></strong>(java.lang.Object entity, org.grails.datastore.mapping.engine.event.EventType eventType)</code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code>protected&nbsp;java.lang.Object</strong></code></td>
                            <td class="colLast"><code><strong><a href="#stampCreatedBy(def)">stampCreatedBy</a></strong>(java.lang.Object entity)</code><br></td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>protected&nbsp;java.lang.Object</strong></code></td>
                            <td class="colLast"><code><strong><a href="#stampLastUpdatedBy(def)">stampLastUpdatedBy</a></strong>(java.lang.Object entity)</code><br></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code>boolean</strong></code></td>
                            <td class="colLast"><code><strong><a href="#supportsEventType(Class<? extends ApplicationEvent>)">supportsEventType</a></strong>(java.lang.Class&lt;? extends org.springframework.context.ApplicationEvent&gt; eventType)</code><br></td>
                        </tr>
                        
                    </table>
                   </ul>
              </li>
            
            <li class="blockList"><a name="method_summary"><!--   --></a>
                    <h3>Inherited Methods Summary</h3>
                    <ul class="blockList">
                    <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Inherited Methods Summary table">
                        <caption><span>Inherited Methods</span><span class="tabEnd">&nbsp;</span></caption>
                        <tr>
                            <th class="colFirst" scope="col">Methods inherited from class</th>
                            <th class="colLast" scope="col">Name</th>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code>class org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener</strong></code></td>
                            <td class="colLast"><code>org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#getOrder(), org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#onApplicationEvent(org.springframework.context.ApplicationEvent), org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#supportsSourceType(java.lang.Class), org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#wait(long, int), org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#wait(long), org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#wait(), org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#equals(java.lang.Object), org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#toString(), org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#hashCode(), org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#getClass(), org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#notify(), org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#notifyAll(), org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener#supportsEventType(java.lang.Class)</code></td>
                        </tr>
                        <tr class="altColor">
                            <td class="colFirst"><code>class java.lang.Object</strong></code></td>
                            <td class="colLast"><code>java.lang.Object#wait(long, int), java.lang.Object#wait(long), java.lang.Object#wait(), java.lang.Object#equals(java.lang.Object), java.lang.Object#toString(), java.lang.Object#hashCode(), java.lang.Object#getClass(), java.lang.Object#notify(), java.lang.Object#notifyAll()</code></td>
                        </tr>
                    </table>
                   </ul>
              </li>
                
        </ul>
        
    </li>
    </ul>
</div>

<div class="details">
    <ul class="blockList">
        <li class="blockList">
           

            

            
            <!-- =========== PROPERTY DETAIL =========== -->
            <ul class="blockList">
                <li class="blockList"><a name="prop_detail">
                    <!--   -->
                </a>
                    <h3>Property Detail</h3>
                    
                        <a name="actorClosure"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>groovy.lang.Closure <strong>actorClosure</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="actorKey"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.String <strong>actorKey</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="defaultIgnoreList"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.util.List&lt;java.lang.String&gt; <strong>defaultIgnoreList</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="defaultMaskList"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.util.List&lt;java.lang.String&gt; <strong>defaultMaskList</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="grailsApplication"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.Object <strong>grailsApplication</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="logFullClassName"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.Boolean <strong>logFullClassName</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="logIds"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.Boolean <strong>logIds</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="nonVerboseDelete"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.Boolean <strong>nonVerboseDelete</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="propertyMask"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.String <strong>propertyMask</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="replacementPatterns"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.util.Map&lt;java.lang.String, java.lang.String&gt; <strong>replacementPatterns</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="saveAuditLog"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.Object <strong>saveAuditLog</strong></h4>
                                <p> Save the audit log in a new session and optionally, in a transaction

 It has also been written as a closure for your sake so that you may over-ride the
 save closure with your own code (should your particular database not work with this code)
 you may over-ride the definition of this closure using ... TODO allow override via config

 To debug in Config.groovy set:
    log4j.debug 'grails.plugins.orm.auditable.AuditLogListener'
 or
    log4j.trace 'grails.plugins.orm.auditable.AuditLogListener'

 SEE: GRAILSPLUGINS-391
     </p>
                            </li>
                        </ul>
                    
                        <a name="sessionAttribute"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.String <strong>sessionAttribute</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="stampAlways"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.Boolean <strong>stampAlways</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="stampCreatedBy"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.String <strong>stampCreatedBy</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="stampEnabled"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.Boolean <strong>stampEnabled</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="stampLastUpdatedBy"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.String <strong>stampLastUpdatedBy</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="transactional"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.Boolean <strong>transactional</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="verbose"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.Boolean <strong>verbose</strong></h4>
                                <p> The verbose flag flips on and off column by column change logging in
 insert and delete events. If this is true then all columns are logged
 each as an individual event.

 If verbose is set to 'true' then you get a log event on
 each individually changed column/field sent to the database
 with a record of the old value and the new value.

 auditLog.verbose = true

 If nonVerboseDelete is set to "true" then delete events are never verbosely logged,
 even when "verbose=true".
     </p>
                            </li>
                        </ul>
                    
                        <a name="withoutAuditLog"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>static&nbsp;java.lang.Object <strong>withoutAuditLog</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="withoutVerboseAuditLog"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>static&nbsp;java.lang.Object <strong>withoutVerboseAuditLog</strong></h4>
                                <p></p>
                            </li>
                        </ul>
                    
                </li>
            </ul>
            

            

            
            <!-- =========== CONSTRUCTOR DETAIL =========== -->
            <ul class="blockList">
                <li class="blockList"><a name="constructor_detail">
                    <!--   -->
                </a>
                    <h3>Constructor Detail</h3>
                    
                        <a name="AuditLogListener(org.grails.datastore.mapping.core.Datastore)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><strong>AuditLogListener</strong>(org.grails.datastore.mapping.core.Datastore datastore)</h4>
                                <p></p>
                            </li>
                        </ul>
                    
                </li>
            </ul>
            


            
            <!-- =========== METHOD DETAIL =========== -->
            <ul class="blockList">
                <li class="blockList"><a name="method_detail">
                    <!--   -->
                </a>
                    <h3>Method Detail</h3>
                    
                        <a name="callHandlersOnly(def)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>boolean <strong>callHandlersOnly</strong>(java.lang.Object domain)</h4>
                                <p> We allow users to specify static auditable = [handlersOnly: true]
 if they don't want us to log events for them and instead have their own plan.
     </p>
                            </li>
                        </ul>
                    
                        <a name="conditionallyMask(def, java.lang.String, def)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.String <strong>conditionallyMask</strong>(java.lang.Object domain, java.lang.String key, java.lang.Object value)</h4>
                                <p> <DL><DT><B>Parameters:</B></DT><DD><code>domain</code> -  the auditable domain object</DD><DD><code>key</code> -  property name</DD><DD><code>value</code> -  the value of the property</DD></DL><DL><DT><B>Returns:</B></DT><DD></DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="executeHandler(def, def, def, def)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.Object <strong>executeHandler</strong>(java.lang.Object domain, java.lang.Object handler, java.lang.Object oldState, java.lang.Object newState)</h4>
                                <p> This calls the handlers based on what was passed in to it.
     </p>
                            </li>
                        </ul>
                    
                        <a name="getActor()"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.String <strong>getActor</strong>()</h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="getClassName(grails.core.GrailsDomainClass)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>protected&nbsp;java.lang.String <strong>getClassName</strong>(grails.core.GrailsDomainClass entity)</h4>
                                <p> Get the class name to log.
     <DL><DT><B>Parameters:</B></DT><DD><code>entity</code> -  A grails.core.GrailsDomainClass instance.</DD></DL><DL><DT><B>Returns:</B></DT><DD>The grails.core.GrailsDomainClass#getFullName(), if <a href='#logFullClassName'>logFullClassName</a> is true,
 grails.core.GrailsDomainClass#getName(), otherwise.</DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="getDirtyPropertyNames(def, grails.core.GrailsDomainClass)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>protected&nbsp;java.util.Set&lt;java.lang.String&gt; <strong>getDirtyPropertyNames</strong>(java.lang.Object domain, grails.core.GrailsDomainClass entity)</h4>
                                <p> Return dirty property names for the given domain class. This method includes some
 special case logic for hasMany properties, which don't follow normal isDirty rules.
     </p>
                            </li>
                        </ul>
                    
                        <a name="getPersistedObjectVersion(def, java.util.Map, java.util.Map)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.Long <strong>getPersistedObjectVersion</strong>(java.lang.Object domain, java.util.Map newMap, java.util.Map oldMap)</h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="getPersistentValue(def, java.lang.String, grails.core.GrailsDomainClass)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>protected&nbsp;java.lang.Object <strong>getPersistentValue</strong>(java.lang.Object domain, java.lang.String property, grails.core.GrailsDomainClass entity)</h4>
                                <p> Get the persistent value for the given domain.property. This method includes
 some special case handling for hasMany properties, which don't follow normal rules.

 TODO - Need a way to load the old value generically for a collection
     </p>
                            </li>
                        </ul>
                    
                        <a name="getUri(def)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.String <strong>getUri</strong>(java.lang.Object domain = null)</h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="ignoreEvent(def, def)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>boolean <strong>ignoreEvent</strong>(java.lang.Object domain, java.lang.Object event)</h4>
                                <p> We allow users to specify static auditable = [ignoreEvents: ["onSave","onDelete","onChange"]]
 First check global variable auditLog.events
     <DL><DT><B>Parameters:</B></DT><DD>domain</DD><DD>event</DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="ignoreList(def)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.util.List&lt;java.lang.String&gt; <strong>ignoreList</strong>(java.lang.Object domain)</h4>
                                <p> The default ignore field list is: ['version','lastUpdated'] if you want
 to provide your own ignore list do so by specifying the ignore list like so:

   static auditable = [ignore:['version','lastUpdated','myField']]

 You may change the default ignore list by setting:

   auditLog.defaultIgnore = ['version', 'lastUpdated', 'myOtherField']

 If instead you really want to trigger on version and lastUpdated changes you
 may specify an empty ignore list:

   static auditable = [ignore:[]]

 Or globally:

   auditLog.defaultIgnore = []

     </p>
                            </li>
                        </ul>
                    
                        <a name="logChanges(def, java.util.Map, java.util.Map, def, def, def)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.Object <strong>logChanges</strong>(java.lang.Object domain, java.util.Map newMap, java.util.Map oldMap, java.lang.Object persistedObjectId, java.lang.Object eventName, java.lang.Object className)</h4>
                                <p> Leans heavily on the "toString()" of a property
 ... this feels crufty... should be tighter...
     </p>
                            </li>
                        </ul>
                    
                        <a name="logIds(def)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.lang.String <strong>logIds</strong>(java.lang.Object value)</h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="maskList(def)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>java.util.List <strong>maskList</strong>(java.lang.Object domain)</h4>
                                <p> The default properties to mask list is:  ['password']
 if you want to provide your own mask list, specify in the DomainClass:

   static auditable = [mask:['password','myField']]

 If you really want to log password property change values
 specify an empty mask list:

   static auditable = [mask:[]]

 Or globally:

   auditLog.defaultMask = ['password']

     </p>
                            </li>
                        </ul>
                    
                        <a name="onPersistenceEvent(org.grails.datastore.mapping.engine.event.AbstractPersistenceEvent)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>@java.lang.Override
protected&nbsp;void <strong>onPersistenceEvent</strong>(org.grails.datastore.mapping.engine.event.AbstractPersistenceEvent event)</h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="onPostInsert(org.grails.datastore.mapping.engine.event.PostInsertEvent)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>protected&nbsp;void <strong>onPostInsert</strong>(org.grails.datastore.mapping.engine.event.PostInsertEvent event)</h4>
                                <p> I'm using the post insert event here instead of the pre-insert
 event so that I can log the id of the new entity after it
 is saved. That does mean the the insert event handlers
 can't work the way we want... but really it's the onChange
 event handler that does the magic for us.
     </p>
                            </li>
                        </ul>
                    
                        <a name="onPreDelete(org.grails.datastore.mapping.engine.event.PreDeleteEvent)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>protected&nbsp;void <strong>onPreDelete</strong>(org.grails.datastore.mapping.engine.event.PreDeleteEvent event)</h4>
                                <p> We must use the preDelete event if we want to capture
 what the old object was like.
     </p>
                            </li>
                        </ul>
                    
                        <a name="onPreUpdate(org.grails.datastore.mapping.engine.event.PreUpdateEvent)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>protected&nbsp;void <strong>onPreUpdate</strong>(org.grails.datastore.mapping.engine.event.PreUpdateEvent event)</h4>
                                <p> Now we get fancy. Here we want to log changes...
 specifically we want to know what property changed,
 when it changed. And what the differences were.

 This works better from the onPreUpdate event handler
 but for some reason it won't execute right for me.
 Instead I'm doing a rather complex mapping to build
 a pair of state HashMaps that represent the old and
 new states of the object.

 The old and new states are passed to the object's
 'onChange' event handler. So that a user can work
 with both sets of values.

 Needs complex type testing BTW.
     </p>
                            </li>
                        </ul>
                    
                        <a name="setActorClosure(groovy.lang.Closure)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>void <strong>setActorClosure</strong>(groovy.lang.Closure closure)</h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="significantChange(def, java.util.Map, java.util.Map)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>protected&nbsp;boolean <strong>significantChange</strong>(java.lang.Object domain, java.util.Map oldMap, java.util.Map newMap)</h4>
                                <p> Prevent infinate loops of change logging by trapping
 non-significant changes. Occasionally you can set up
 a change handler that will create a "trivial" object
 change that you don't want to trigger another change
 event. So this feature uses the ignore parameter
 to provide a list of fields for onChange to ignore.
     </p>
                            </li>
                        </ul>
                    
                        <a name="stamp(def, org.grails.datastore.mapping.engine.event.EventType)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>void <strong>stamp</strong>(java.lang.Object entity, org.grails.datastore.mapping.engine.event.EventType eventType)</h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="stampCreatedBy(def)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>protected&nbsp;java.lang.Object <strong>stampCreatedBy</strong>(java.lang.Object entity)</h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="stampLastUpdatedBy(def)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>protected&nbsp;java.lang.Object <strong>stampLastUpdatedBy</strong>(java.lang.Object entity)</h4>
                                <p></p>
                            </li>
                        </ul>
                    
                        <a name="supportsEventType(Class<? extends ApplicationEvent>)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>@java.lang.Override
boolean <strong>supportsEventType</strong>(java.lang.Class&lt;? extends org.springframework.context.ApplicationEvent&gt; eventType)</h4>
                                <p></p>
                            </li>
                        </ul>
                    
                </li>
            </ul>
            
        </li>
    </ul>
</div>

<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
    <!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
    <!--   -->
</a>
    <ul class="navList" title="Navigation">
        <li><a href="../../../../overview-summary.html">Overview</a></li>
        <li><a href="package-summary.html">Package</a></li>
        <li class="navBarCell1Rev">Class</li>
        <li><a href="../../../../deprecated-list.html">Deprecated</a></li>
        <li><a href="../../../../index-all.html">Index</a></li>
        <li><a href="../../../../help-doc.html">Help</a></li>
    </ul>
</div>

<div class="subNav">
    <div>
        <ul class="navList">
            <li><a href="../../../../index.html?grails/plugins/orm/auditable/AuditLogListener" target="_top">Frames</a></li>
            <li><a href="AuditLogListener.html" target="_top">No Frames</a></li>
        </ul>
    </div>
    <div>
        <ul class="subNavList">
            <li>Summary:&nbsp;</li>
            Nested&nbsp;&nbsp;&nbsp;Field&nbsp;&nbsp;&nbsp;<li><a href="#property_summary">Property</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#constructor_summary">Constructor</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#method_summary">Method</a></li>&nbsp;&nbsp;&nbsp;
        </ul>
        <ul class="subNavList">
            <li>&nbsp;|&nbsp;Detail:&nbsp;</li>
            Field&nbsp;&nbsp;&nbsp;<li><a href="#prop_detail">Property</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#constructor_detail">Constructor</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#method_detail">Method</a></li>&nbsp;&nbsp;&nbsp;
        </ul>
    </div>
    <p>Groovy Documentation</p>
    <a name="skip-navbar_bottom">
        <!--   -->
    </a>
    </div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
